<div class="col-md-9 col-md-push-3">

  <header class="row tab-wrapper">
    <div class="col-md-12" >

      <div ng-if="search.results.total > 0">
        <!-- results summary in search mode -->
        <div class="ss-search-results-mode" ng-if="searchMode()">
          Search Results:
          <span
            class="ss-search-results-count"
            ng-bind-template="{{search.results.total | number:0}}"
          ></span>
          Questions
        </div>
        <!-- results summary in browse mode -->
        <div class="ss-search-results-mode" ng-if="!searchMode()">
          Browsing
          <span
            class="ss-search-results-count"
            ng-bind-template="{{search.results.total | number:0}}"
          ></span>
          Questions
        </div>
      </div>
      <!-- no results -->
      <div ng-if="search.results.total == 0">
        <div class="ss-search-results-mode">
          No Results
        </div>
      </div>

      <!-- sort tabs -->
      <ul class="ss-sort nav nav-tabs" role="tablist">
        <li
          ng-repeat="sort in sorts"
          ng-click="sort.active ? setSort(sort.value) : angular.noop()"
          ng-disabled="!sort.active"
          ng-class="{
            'ss-sort-active': sort.active,
            'ss-sort-inactive': !sort.active
          }"
        >
          <a
            href=""
            role="tab"
            data-toggle="tab"
            ng-class="{
              'ss-sort-selected': (
                sort.value[0] === getSelectedSort()
              )
            }"
          >
            {{sort.label}}
          </a>
        </li>
      </ul>

    </div> <!-- col-md-12 -->
  </header> <!-- header tab-wrapper -->

  <div ng-if="search.$ml.waiting" class="spinner"></div>
  <div ng-if="!search.$ml.waiting">
    <!-- .question-row -> .ss-result -->
    <section
      class="ss-result row clearfix question-row"
      ng-repeat="item in search.results.items"
    >
      <ss-search-result></ss-search-result>
    </section>

    <!-- paging -->
    <div class="row ss-paging" ng-if="search.results.total > 0">
      <div class="col-md-11 col-sm-10 col-xs-9">
        <ul class="pagination">
          <li>
            <a
              href=""
              ng-disabled="!search.hasPrevPage()"
              ng-click="incrementPage(-1)"
            >
              <span class="caret left"></span>
            </a>
          </li>
          <!-- page 1 -->
          <li ng-class="
            {'active': search.getCurrentPage() === 1}
          ">
            <a
              href=""
              ng-click="setCurrentPage(1)"
            >1 <span class="sr-only">(current)</span></a>
          </li>
          <!-- pages 2 - 5 -->
          <li
            ng-class="
              {'active': search.getCurrentPage() === $index + 2}
            "
            ng-if="search.getPageCount() > 1"
            ng-repeat="page in (search.getPageCount() >= 4) ?
                       search.getNumAsArray(4) :
                       search.getNumAsArray(search.getPageCount() - 1)
                       track by $index"
          >
            <a
              href=""
              ng-click="setCurrentPage($index + 2)"
            >{{$index + 2}}</a>
          <!-- ... -->
          <li>
            <a
              href=""
              ng-click="angular.noop()"
              ng-if="search.getPageCount() >= 5"
            >...</a>
          </li>
          <!-- TODO page sel-2 - sel+2 -->
          <!-- TODO ... -->
          <!-- TODO page max-5 - max-1 -->
          <!-- page max -->
          <li
            ng-if="search.getPageCount() >= 5"
            ng-class="
              {'active': search.getCurrentPage() === search.getPageCount()}
            "
          >
            <a
              href=""
              ng-if="search.getPageCount() > 1"
              ng-click="setCurrentPage(search.getPageCount())"
            >{{search.getPageCount()}} <span class="sr-only">(current)</span></a>
          </li>
          <li>
            <a
              href=""
              ng-disabled="!search.hasNextPage()"
              ng-click="incrementPage(1)"
            >
              <span class="caret right"></span>
            </a>
          </li>
        </ul>
      </div>
    </div> <!-- row paging -->

  </div>

</div> <!-- col-md-9 col-md-push-3 -->
